var Imported = Imported || {};
Imported.Naoso_StellaMZ_Align = true;
var Naoso = Naoso || {};
Naoso.StellaMZ_Align = Naoso.StellaMZ_Align || {};

/*:
 * @target MZ
 * @plugindesc [ Version 1.1.2 ] Weapon sprite Stella align.
 * @author Naoso
 * @url https://forums.rpgmakerweb.com/index.php?threads/stella-character-generator-weapon-sprite-alignment.152118/
 * 
 * @help
 * ============================================================================
 * 
 * [ SETUP WEAPON SHEETS ]
 * 
 * >> Visustella Weapon Animation required <<
 * http://www.yanfly.moe/wiki/Weapon_Animation_VisuStella_MZ
 * 
 * > Create individual weapon images, or create a new weapon sheet.
 * > Use notetag <Weapon Image: filename> for individual images, or
 *  <Weapon Image: x> for image sheets.
 *  Swing-motion weapon images: frame 3 must be modified to display correctly.
 * 
 * 
 * [ SETUP STELLA SIDEVIEW BATTLER ]
 * 
 * >> Stella Character Generator required <<
 * https://visustella.itch.io/stella-character-generator
 * 
 * >> Visustella Battle Core required <<
 * http://www.yanfly.moe/wiki/Battle_Core_VisuStella_MZ
 * 
 * For Actors:
 * > Setup the actor's Stella Sideview Battler Image in the Database.
 * > Use notetag <Stella> in note box.
 * 
 * For Enemies:
 * > Use notetag <Sideview Battler: filename>
 * EXAMPLE: <Sideview Battler: Actor1_1>
 * 
 * 
 * [ SETUP ENEMY SIDEVIEW WEAPON ]
 * 
 * > Use notetag <Sideview Weapon: weapontype>
 *  Replace weapontype with a weapontype from Database Types.
 *  Do NOT include any escape codes.
 * EXAMPLE: <Sideview Weapon: Sword>
 *  Change the enemy's weapon image by using notetag <Weapon Image: filename>
 * EXAMPLE: <Weapon Image: StellaSword>
 * > Use notetag <Stella> in note box.
 * 
 * 
 * Actors and Enemies can still use MZ's chibi sideview battlers with no change to weapon sprite position.
 * 
 * [ Version 1.0.0 ]
 *  Plugin Finished
 * 
 * [ Version 1.0.1 ]
 *  Updated for Dual Wield
 * 
 * [ Version 1.1.1 ]
 *  Added plugin parameters for easy modification
 * 
 * [ Version 1.1.2 ]
 *  Updated for unarmed actors
 * 
 *  * [ Version 1.1.3 ]
 *  Actor bug fix
 * 
 * [License]
 * this plugin is released under MIT license.
 * http://opensource.org/licenses/mit-license.php
 * 
 * ============================================================================
 *
 *
 * @param WeaponList 
 * @text Weapon Frame Positions 
 * 
 * @param Weapon1
 * @text Thrust
 * @parent WeaponList
 * @type struct<Weapon1>
 * @desc Setup this weapon's position.
 * @default {"Frame1":"","Frame1posX":"0","Frame1posY":"32","Frame2":"","Frame2posX":"-4","Frame2posY":"24","Frame3":"","Frame3posX":"-32","Frame3posY":"24"}
 * 
 * @param Weapon2
 * @text Swing
 * @parent WeaponList
 * @type struct<Weapon2>
 * @desc Setup this weapon's position.
 * @default {"Frame1":"","Frame1posX":"0","Frame1posY":"32","Frame2":"","Frame2posX":"-38","Frame2posY":"20","Frame3":"","Frame3posX":"-16","Frame3posY":"72"}
 * 
 * @param Weapon3
 * @text Missile
 * @parent WeaponList
 * @type struct<Weapon3>
 * @desc Setup this weapon's position.
 * @default {"Frame1":"","Frame1posX":"-28","Frame1posY":"32","Frame2":"","Frame2posX":"-20","Frame2posY":"14","Frame3":"","Frame3posX":"0","Frame3posY":"0"}
 * 
 * 
 * 
 * 
 * 
 */ 
 /*~struct~Weapon1:
 * 
 * @param Frame1
 * @text Frame 1
 * @parent Weapon1
 * 
 * @param Frame1posX
 * @type number
 * @parent Frame1
 * @min -96
 * @max 96
 * @default 0
 * 
 * @param Frame1posY
 * @type number
 * @parent Frame1
 * @min -64
 * @max 64
 * @default 32
 * 
 * @param Frame2
 * @text Frame 2
 * @parent Weapon1
 * 
 * @param Frame2posX
 * @type number
 * @parent Frame2
 * @min -96
 * @max 96
 * @default -4
 * 
 * @param Frame2posY
 * @type number
 * @parent Frame2
 * @min -64
 * @max 164
 * @default 24
 * 
 * @param Frame3
 * @text Frame 3
 * @parent Weapon1
 * 
 * @param Frame3posX
 * @type number
 * @parent Frame3
 * @min -96
 * @max 96
 * @default -32
 * 
 * @param Frame3posY
 * @type number
 * @parent Frame3
 * @min -64
 * @max 164
 * @default 24
 * 
 */
 /*~struct~Weapon2:
 * 
 * @param Frame1
 * @text Frame 1
 * @parent Weapon2
 * 
 * @param Frame1posX
 * @type number
 * @parent Frame1
 * @min -96
 * @max 96
 * @default 0
 * 
 * @param Frame1posY
 * @type number
 * @parent Frame1
 * @min -64
 * @max 64
 * @default 32
 * 
 * @param Frame2
 * @text Frame 2
 * @parent Weapon2
 * 
 * @param Frame2posX
 * @type number
 * @parent Frame2
 * @min -96
 * @max 96
 * @default -38
 * 
 * @param Frame2posY
 * @type number
 * @parent Frame2
 * @min -64
 * @max 164
 * @default 20
 * 
 * @param Frame3
 * @text Frame 3
 * @parent Weapon2
 * 
 * @param Frame3posX
 * @type number
 * @parent Frame3
 * @min -96
 * @max 96
 * @default -16
 * 
 * @param Frame3posY
 * @type number
 * @parent Frame3
 * @min -64
 * @max 164
 * @default 72
 * 
 */
 /*~struct~Weapon3:
 * 
 * @param Frame1
 * @text Frame 1
 * @parent Weapon3
 * 
 * @param Frame1posX
 * @type number
 * @parent Frame1
 * @min -96
 * @max 96
 * @default -28
 * 
 * @param Frame1posY
 * @type number
 * @parent Frame1
 * @min -64
 * @max 64
 * @default 32
 * 
 * @param Frame2
 * @text Frame 2
 * @parent Weapon3
 * 
 * @param Frame2posX
 * @type number
 * @parent Frame2
 * @min -96
 * @max 96
 * @default -20
 * 
 * @param Frame2posY
 * @type number
 * @parent Frame2
 * @min -64
 * @max 164
 * @default 14
 * 
 * @param Frame3
 * @text Frame 3
 * @parent Weapon3
 * 
 * @param Frame3posX
 * @type number
 * @parent Frame3
 * @min -96
 * @max 96
 * @default 0
 * 
 * @param Frame3posY
 * @type number
 * @parent Frame3
 * @min -64
 * @max 164
 * @default 0
 * 
 */

const _0x1c0a7e=_0x4ca7;function _0x5192(){const _0x2ff59e=['RWEXS','Vqyck','Stella','updateFram','423HcORUQ','Frame1posX','OvDcp','_subject','laMZ_Align','ePAJV','ponSlot','Frame2posY','actorId','call','UDyHl','Weapon3','GqEVE','BJGjY','ons','aauNs','rEpKH','_pattern','type','Frame3posY','Paramerter','Weapon1','svBattlerD','EEedN','11533508lNILxK','dfmpY','DNVcM','YxcvO','parse','781180KHdmgB','Frame1posY','300808oVKFGw','DaywI','attackMoti','2077044LXNDqk','isWeapon','elYBF','meta','enemyId','update','Frame3posX','Naoso_Stel','lign','updatePatt','ait','Count','prototype','eQFqy','HwWva','3733640TjcRrl','23372160soSnjq','Sghnx','StWNL','animationW','ffYqU','pdgth','AUbhi','isEnemy','PwXbW','_itemId','isActor','StellaMZ_A','Weapon2','uvnsp','_activeWea','wtypeId','_equips','ata','ern','POnGq','parameters','232qMvtak','_animation','Frame2posX'];_0x5192=function(){return _0x2ff59e;};return _0x5192();}function _0x4ca7(_0x634c0b,_0x23794e){const _0x5977df=_0x5192();return _0x4ca7=function(_0x3760c1,_0x4dfbbb){_0x3760c1=_0x3760c1-(0xe5*0x4+0x21d*-0x7+0xd28);let _0x57132f=_0x5977df[_0x3760c1];return _0x57132f;},_0x4ca7(_0x634c0b,_0x23794e);}(function(_0x3cdbb1,_0x49dc78){const _0x13c203=_0x4ca7,_0x3aeebb=_0x3cdbb1();while(!![]){try{const _0x1ac00a=parseInt(_0x13c203(0x208))/(0x2523+-0x868+-0x1cba)+parseInt(_0x13c203(0x232))/(0xccc+-0x22b2+0x15e8)*(parseInt(_0x13c203(0x239))/(-0x1588*-0x1+0x4d6*-0x1+0x10af*-0x1))+-parseInt(_0x13c203(0x20a))/(-0x1*-0x24dd+0xcd3+-0x31ac)+-parseInt(_0x13c203(0x21c))/(-0x41*-0x7b+0xc28+-0x2b5e)+-parseInt(_0x13c203(0x20d))/(-0x3*-0x6fb+-0xc29+-0x8c2)+-parseInt(_0x13c203(0x203))/(0x181c+0xe0a+0x3*-0xcb5)+parseInt(_0x13c203(0x21d))/(0xbfe+0x1*-0x710+0x1*-0x4e6);if(_0x1ac00a===_0x49dc78)break;else _0x3aeebb['push'](_0x3aeebb['shift']());}catch(_0x690dd7){_0x3aeebb['push'](_0x3aeebb['shift']());}}}(_0x5192,0x11f*-0x1139+0x1*-0x123635+-0x254fc*-0x16),Naoso[_0x1c0a7e(0x228)+_0x1c0a7e(0x215)][_0x1c0a7e(0x1ff)+'s']=PluginManager[_0x1c0a7e(0x231)](_0x1c0a7e(0x214)+_0x1c0a7e(0x23d)),Sprite_Weapon[_0x1c0a7e(0x219)][_0x1c0a7e(0x212)]=function(){const _0x47043a=_0x1c0a7e,_0x22e2c1={'Sghnx':function(_0x248e47,_0x1dd0ec){return _0x248e47!==_0x1dd0ec;},'DNVcM':function(_0x2b0fe2,_0x415f47){return _0x2b0fe2==_0x415f47;},'HwWva':function(_0x2a6e22,_0x390851){return _0x2a6e22>=_0x390851;},'DaywI':function(_0x4d9074,_0x355103){return _0x4d9074(_0x355103);},'dfmpY':_0x47043a(0x23a),'uvnsp':function(_0x52020d,_0x5edb08){return _0x52020d(_0x5edb08);},'ffYqU':_0x47043a(0x209),'GqEVE':function(_0x116971,_0x18cc0e){return _0x116971==_0x18cc0e;},'StWNL':_0x47043a(0x234),'UDyHl':function(_0x17eaf9,_0x32540c){return _0x17eaf9(_0x32540c);},'ePAJV':_0x47043a(0x1f2),'POnGq':function(_0x3b5087,_0xdb0e2f){return _0x3b5087==_0xdb0e2f;},'eQFqy':function(_0x587469,_0x46af5f){return _0x587469(_0x46af5f);},'AUbhi':_0x47043a(0x213),'BJGjY':_0x47043a(0x1fe),'aauNs':function(_0x4f8767,_0x5b9c1d){return _0x4f8767(_0x5b9c1d);},'Vqyck':function(_0x46522a,_0x34ed0e){return _0x46522a(_0x34ed0e);},'OvDcp':function(_0x39fce5,_0x365829){return _0x39fce5==_0x365829;},'RWEXS':function(_0x30f475,_0x5adc1e){return _0x30f475(_0x5adc1e);},'elYBF':function(_0x369a94,_0x57673e){return _0x369a94==_0x57673e;},'PwXbW':function(_0x1d99b3,_0x4d5084){return _0x1d99b3(_0x4d5084);},'YxcvO':function(_0x3cfe0d,_0x298ea6){return _0x3cfe0d==_0x298ea6;},'EEedN':function(_0x29e208,_0x4b0834){return _0x29e208>=_0x4b0834;},'rEpKH':function(_0x24e92d,_0x4144a8){return _0x24e92d(_0x4144a8);},'pdgth':function(_0x94039f,_0x164df0){return _0x94039f>=_0x164df0;}};Sprite[_0x47043a(0x219)][_0x47043a(0x212)][_0x47043a(0x1f4)](this),this[_0x47043a(0x233)+_0x47043a(0x218)]++;let _0x4070dd=BattleManager[_0x47043a(0x23c)],_0x4dcf2c=![],_0x597434=0xa40+0x9a0+-0x13e*0x10;if(_0x22e2c1[_0x47043a(0x21e)](_0x4070dd,null)){if(_0x4070dd[_0x47043a(0x227)]()){_0x4dcf2c=$dataActors[_0x4070dd[_0x47043a(0x1f3)]()][_0x47043a(0x210)][_0x47043a(0x237)];switch(_0x4070dd[_0x47043a(0x22b)+_0x47043a(0x1f1)]){case 0x1*0x213b+-0x27f*-0x3+-0x28b8:_0x4070dd[_0x47043a(0x22d)][0x5*0x5ea+-0x2*0x836+-0xd26][_0x47043a(0x20e)]()?_0x597434=$dataSystem[_0x47043a(0x20c)+_0x47043a(0x1f9)][$dataWeapons[_0x4070dd[_0x47043a(0x22d)][0x2*0xca5+-0x1cdf+-0x1*-0x395][_0x47043a(0x226)]][_0x47043a(0x22c)]][_0x47043a(0x1fd)]:null;;break;case-0x66*0x2+0x20b*0x5+-0x96a:_0x4070dd[_0x47043a(0x22d)][0xbae+0x11fc+0x9e3*-0x3][_0x47043a(0x20e)]()?_0x597434=$dataSystem[_0x47043a(0x20c)+_0x47043a(0x1f9)][$dataWeapons[_0x4070dd[_0x47043a(0x22d)][0x3af*0x1+0x2350+0x142*-0x1f][_0x47043a(0x226)]][_0x47043a(0x22c)]][_0x47043a(0x1fd)]:null;;break;}}_0x4070dd[_0x47043a(0x224)]()&&(_0x4dcf2c=$dataEnemies[_0x4070dd[_0x47043a(0x211)]()][_0x47043a(0x210)][_0x47043a(0x237)],_0x597434=$dataSystem[_0x47043a(0x20c)+_0x47043a(0x1f9)][_0x4070dd[_0x47043a(0x201)+_0x47043a(0x22e)]()[_0x47043a(0x22c)]][_0x47043a(0x1fd)]),_0x4dcf2c&&(_0x22e2c1[_0x47043a(0x205)](_0x597434,0xef*0x26+-0x17*-0x119+-0xc25*0x5)&&(_0x22e2c1[_0x47043a(0x21b)](this[_0x47043a(0x1fc)],-0x8a5*0x1+0xfd9+-0x734)&&(this['x']=_0x22e2c1[_0x47043a(0x20b)](Number,JSON[_0x47043a(0x207)](Naoso[_0x47043a(0x228)+_0x47043a(0x215)][_0x47043a(0x1ff)+'s'][_0x47043a(0x200)])[_0x22e2c1[_0x47043a(0x204)]]),this['y']=_0x22e2c1[_0x47043a(0x22a)](Number,JSON[_0x47043a(0x207)](Naoso[_0x47043a(0x228)+_0x47043a(0x215)][_0x47043a(0x1ff)+'s'][_0x47043a(0x200)])[_0x22e2c1[_0x47043a(0x221)]])),_0x22e2c1[_0x47043a(0x1f7)](this[_0x47043a(0x1fc)],-0x708+-0x1115+0x181e)&&(this['x']=_0x22e2c1[_0x47043a(0x22a)](Number,JSON[_0x47043a(0x207)](Naoso[_0x47043a(0x228)+_0x47043a(0x215)][_0x47043a(0x1ff)+'s'][_0x47043a(0x200)])[_0x22e2c1[_0x47043a(0x21f)]]),this['y']=_0x22e2c1[_0x47043a(0x1f5)](Number,JSON[_0x47043a(0x207)](Naoso[_0x47043a(0x228)+_0x47043a(0x215)][_0x47043a(0x1ff)+'s'][_0x47043a(0x200)])[_0x22e2c1[_0x47043a(0x23e)]])),_0x22e2c1[_0x47043a(0x230)](this[_0x47043a(0x1fc)],-0x24f+0x218c+-0xc3*0x29)&&(this['x']=_0x22e2c1[_0x47043a(0x21a)](Number,JSON[_0x47043a(0x207)](Naoso[_0x47043a(0x228)+_0x47043a(0x215)][_0x47043a(0x1ff)+'s'][_0x47043a(0x200)])[_0x22e2c1[_0x47043a(0x223)]]),this['y']=_0x22e2c1[_0x47043a(0x1f5)](Number,JSON[_0x47043a(0x207)](Naoso[_0x47043a(0x228)+_0x47043a(0x215)][_0x47043a(0x1ff)+'s'][_0x47043a(0x200)])[_0x22e2c1[_0x47043a(0x1f8)]]))),_0x22e2c1[_0x47043a(0x205)](_0x597434,-0x1a6a+0x17*-0x159+0x396a)&&(_0x22e2c1[_0x47043a(0x21b)](this[_0x47043a(0x1fc)],0x7ae*-0x2+-0x1bff+-0xb*-0x3f1)&&(this['x']=_0x22e2c1[_0x47043a(0x1fa)](Number,JSON[_0x47043a(0x207)](Naoso[_0x47043a(0x228)+_0x47043a(0x215)][_0x47043a(0x1ff)+'s'][_0x47043a(0x229)])[_0x22e2c1[_0x47043a(0x204)]]),this['y']=_0x22e2c1[_0x47043a(0x236)](Number,JSON[_0x47043a(0x207)](Naoso[_0x47043a(0x228)+_0x47043a(0x215)][_0x47043a(0x1ff)+'s'][_0x47043a(0x229)])[_0x22e2c1[_0x47043a(0x221)]])),_0x22e2c1[_0x47043a(0x23b)](this[_0x47043a(0x1fc)],0x268a+0x22da+-0x4963)&&(this['x']=_0x22e2c1[_0x47043a(0x1f5)](Number,JSON[_0x47043a(0x207)](Naoso[_0x47043a(0x228)+_0x47043a(0x215)][_0x47043a(0x1ff)+'s'][_0x47043a(0x229)])[_0x22e2c1[_0x47043a(0x21f)]]),this['y']=_0x22e2c1[_0x47043a(0x235)](Number,JSON[_0x47043a(0x207)](Naoso[_0x47043a(0x228)+_0x47043a(0x215)][_0x47043a(0x1ff)+'s'][_0x47043a(0x229)])[_0x22e2c1[_0x47043a(0x23e)]])),_0x22e2c1[_0x47043a(0x20f)](this[_0x47043a(0x1fc)],-0xdb9*-0x1+0x1282*-0x1+-0x199*-0x3)&&(this['x']=_0x22e2c1[_0x47043a(0x225)](Number,JSON[_0x47043a(0x207)](Naoso[_0x47043a(0x228)+_0x47043a(0x215)][_0x47043a(0x1ff)+'s'][_0x47043a(0x229)])[_0x22e2c1[_0x47043a(0x223)]]),this['y']=_0x22e2c1[_0x47043a(0x21a)](Number,JSON[_0x47043a(0x207)](Naoso[_0x47043a(0x228)+_0x47043a(0x215)][_0x47043a(0x1ff)+'s'][_0x47043a(0x229)])[_0x22e2c1[_0x47043a(0x1f8)]]))),_0x22e2c1[_0x47043a(0x206)](_0x597434,0x2*-0x3cb+0xc5*-0x1e+0x1eae)&&(_0x22e2c1[_0x47043a(0x202)](this[_0x47043a(0x1fc)],-0x269*0x7+0xaf4+0x5eb*0x1)&&(this['x']=_0x22e2c1[_0x47043a(0x1fb)](Number,JSON[_0x47043a(0x207)](Naoso[_0x47043a(0x228)+_0x47043a(0x215)][_0x47043a(0x1ff)+'s'][_0x47043a(0x1f6)])[_0x22e2c1[_0x47043a(0x204)]]),this['y']=_0x22e2c1[_0x47043a(0x236)](Number,JSON[_0x47043a(0x207)](Naoso[_0x47043a(0x228)+_0x47043a(0x215)][_0x47043a(0x1ff)+'s'][_0x47043a(0x1f6)])[_0x22e2c1[_0x47043a(0x221)]])),_0x22e2c1[_0x47043a(0x206)](this[_0x47043a(0x1fc)],-0x5*-0x16a+-0x17*-0xcc+-0x1965)&&(this['x']=_0x22e2c1[_0x47043a(0x21a)](Number,JSON[_0x47043a(0x207)](Naoso[_0x47043a(0x228)+_0x47043a(0x215)][_0x47043a(0x1ff)+'s'][_0x47043a(0x1f6)])[_0x22e2c1[_0x47043a(0x21f)]]),this['y']=_0x22e2c1[_0x47043a(0x1fb)](Number,JSON[_0x47043a(0x207)](Naoso[_0x47043a(0x228)+_0x47043a(0x215)][_0x47043a(0x1ff)+'s'][_0x47043a(0x1f6)])[_0x22e2c1[_0x47043a(0x23e)]])),_0x22e2c1[_0x47043a(0x230)](this[_0x47043a(0x1fc)],0xdd0+-0xd15*0x2+-0xe*-0xe2)&&(this['x']=_0x22e2c1[_0x47043a(0x20b)](Number,JSON[_0x47043a(0x207)](Naoso[_0x47043a(0x228)+_0x47043a(0x215)][_0x47043a(0x1ff)+'s'][_0x47043a(0x1f6)])[_0x22e2c1[_0x47043a(0x223)]]),this['y']=_0x22e2c1[_0x47043a(0x1fa)](Number,JSON[_0x47043a(0x207)](Naoso[_0x47043a(0x228)+_0x47043a(0x215)][_0x47043a(0x1ff)+'s'][_0x47043a(0x1f6)])[_0x22e2c1[_0x47043a(0x1f8)]]))));}_0x22e2c1[_0x47043a(0x222)](this[_0x47043a(0x233)+_0x47043a(0x218)],this[_0x47043a(0x220)+_0x47043a(0x217)]())&&(this[_0x47043a(0x216)+_0x47043a(0x22f)](),this[_0x47043a(0x238)+'e'](),_0x4dcf2c&&(this['x']=0x20f3*0x1+-0x8a8*0x3+-0x6fb*0x1,this['y']=-0x2263+-0x2584+0x47e7),this[_0x47043a(0x233)+_0x47043a(0x218)]=0x17aa+0x2*0x1f7+-0x1b98);});